{% extends "management_app/navigation_bar_base.html" %}

<!--This page inherits from navigation_bar_base. It is used to display the homepage calendar. -->

{% block nav-homepage %}
<div class="w3-container w3-blue-grey w3-center w3-text-light-grey w3-padding-32" id="homepage">
    <h4><b>Schedules</b></h4>
    <div class="w3-content w3-justify" style="max-width:600px">
        <hr class="w3-opacity">
    </div>
</div>

<div id="calendar"></div>

<div class="w3-sand w3-container w3-center w3-text-blue-grey w3-padding-32">
    <div class="w3-content w3-justify" style="max-width:600px">
        <hr class="w3-opacity w3-black">
        <hr class="w3-opacity w3-black">
    </div>
</div>

<script type='text/javascript'>

$(document).ready(function() {
    $('#calendar').fullCalendar({
        events: '/schedule/api/occurrences?calendar_slug=classCalendar',
        dayClick: function(date, jsEvent, view) {

            $('#calendar').fullCalendar('gotoDate',date);
            $('#calendar').fullCalendar('changeView','agendaDay');

        },
        eventClick: function(calEvent, jsEvent, view) {

            //for(var key in calEvent) {
            //    alert('key: ' + key + '\n' + 'value: ' + calEvent[key]);
            //}
            window.open("classes/" + calEvent.event_id, "_self");
            return false;
        }
    })
});
</script>

{% endblock %}