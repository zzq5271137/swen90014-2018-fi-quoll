{% extends "management_app/navigation_bar_base.html" %}

<!--This page inherits from navigation_bar_base. It is used to display client details. -->
{% block nav-client-detail %}
  <div class="w3-container w3-sand w3-center w3-text-black w3-padding-32">

      <div class="w3-container w3-sand w3-center w3-text-blue-grey w3-padding-32" style="max-width:100%">
      <h4><b>Client Detail</b></h4>
      <div class="w3-content w3-justify" style="max-width:600px">
          <hr class="w3-opacity w3-blue-grey">
          <hr class="w3-opacity w3-blue-grey">
      </div>
    </div>
    <p><button class="w3-button w3-blue-grey w3-padding-large w3-margin-top w3-margin-bottom"
               OnClick="location.href= '{% url 'client_edit' client.id %}'" style="width:auto;">Edit Client</button></p>
    <hr class="w3-opacity">
    {% if client %}

      <p>Client Name : {{ client.client_name }}</p>
      <p>Contact Name: {{ client.contact_name}}</p>
      <p>Contact Email: {{ client.contact_email}}</p>
      <p>Created Time: {{ client.created_time}}</p>

      <hr class="w3-opacity">

      <p>Client Address:  {{ client.address.street }}, {{ client.address.state }}, {{ client.address.postcode }}</p>

      {% else %}
        <p>Something went wrong.</p>
    {% endif %}


    <hr class="w3-opacity">
    <h4><b>All Classes</b></h4>
    <table class="w3-table-all w3-hoverable">
            <thead>
              <tr class="w3-light-grey">
                <th>Start</th>
                <th>End</th>
                <th>Course</th>
                <th>Trainer</th>
                <th>Class Name</th>
              </tr>
              </thead>
              {% if client.fesclass %}
              {% for class in client.fesclass.all %}
                  <tr>
                    <td><a href="{% url 'class_detail' class.id %}"> {{ class.start }} </a></td>
                    <td><a href="{% url 'class_detail' class.id %}"> {{ class.end }}</a></td>
                    <td>{{ class.class_course }}</td>
                    <td>{{ class.class_trainer }}</td>
                    <td>{{ class.title }}</td>
                  </tr>
              {% endfor %}
            {% endif %}
        </table>


    <hr class="w3-opacity">
    <p><button class="w3-button w3-blue-grey w3-padding-large w3-margin-top w3-margin-bottom"
               OnClick="location.href= '{% url 'client_delete' client.id %}'" style="width:auto;">Delete Client</button></p>

    <div class="w3-container w3-sand w3-center w3-text-blue-grey w3-padding-32" style="max-width:100%">
      <div class="w3-content w3-justify" style="max-width:600px">
          <hr class="w3-opacity w3-blue-grey">
          <hr class="w3-opacity w3-blue-grey">
      </div>
    </div>

  </div>
{% endblock %}